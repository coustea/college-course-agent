<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ccut.mapper.CourseMapper">

    <resultMap id="CourseRM" type="com.ccut.entity.Course">
        <id property="courseId" column="course_id"/>
        <result property="courseCode" column="course_code"/>
        <result property="courseName" column="course_name"/>
        <result property="description" column="description"/>
        <result property="credits" column="credits"/>
        <result property="teacherId" column="teacher_id"/>
        <result property="startDate" column="start_date"/>
        <result property="endDate" column="end_date"/>
        <result property="semester" column="semester"/>
        <result property="maxStudents" column="max_students"/>
    </resultMap>

    <insert id="insert">
        INSERT INTO courses (
            <trim suffixOverrides=",">
                <if test="courseCode != null">course_code,</if>
                <if test="courseName != null">course_name,</if>
                <if test="description != null">description,</if>
                <if test="credits != null">credits,</if>
                <if test="teacherId != null">teacher_id,</if>
                <if test="startDate != null">start_date,</if>
                <if test="endDate != null">end_date,</if>
                <if test="semester != null">semester,</if>
                <if test="maxStudents != null">max_students,</if>
            </trim>
        ) VALUES (
            <trim suffixOverrides=",">
                <if test="courseCode != null">#{courseCode},</if>
                <if test="courseName != null">#{courseName},</if>
                <if test="description != null">#{description},</if>
                <if test="credits != null">#{credits},</if>
                <if test="teacherId != null">#{teacherId},</if>
                <if test="startDate != null">#{startDate},</if>
                <if test="endDate != null">#{endDate},</if>
                <if test="semester != null">#{semester},</if>
                <if test="maxStudents != null">#{maxStudents},</if>
            </trim>
        )
    </insert>

    <update id="updateById">
        UPDATE courses
        <set>
            <if test="courseName != null">course_name = #{courseName},</if>
            <if test="description != null">description = #{description},</if>
            <if test="credits != null">credits = #{credits},</if>
            <if test="teacherId != null">teacher_id = #{teacherId},</if>
            <if test="startDate != null">start_date = #{startDate},</if>
            <if test="endDate != null">end_date = #{endDate},</if>
            <if test="semester != null">semester = #{semester},</if>
            <if test="maxStudents != null">max_students = #{maxStudents},</if>
        </set>
        WHERE course_id = #{courseId}
    </update>

    <delete id="deleteById">
        DELETE FROM courses WHERE course_id = #{courseId}
    </delete>

    <select id="selectAll" resultMap="CourseRM">
        SELECT course_id, course_name, description, credits, start_date, end_date, semester, max_students
        FROM courses ORDER BY course_id DESC
    </select>

    <select id="selectById" resultMap="CourseRM">
        SELECT course_id, course_name, description, credits, start_date, end_date, semester, max_students
        FROM courses WHERE course_id = #{courseId}
    </select>

</mapper>